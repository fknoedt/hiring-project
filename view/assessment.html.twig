{% include "header.html.twig" %}

<!-- Bootstrap Select from https://developer.snapappointments.com/bootstrap-select/ -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>

<script language="JavaScript" src="/assets/assessment.js"></script>

<div class="container">
    <div class="card page-container">
        <div class="row description">
            <h1>{{ user.fName }}, please choose an Assessment below</h1>
        </div>
        <div class="row top-margin">
            <select class="selectpicker" data-style="btn-primary" data-live-search="true" data-width="auto" id="selectAssessment">
                <option>Assessment</option>
                {% for area,assessments in assessmentList %}
                <optgroup label="{{ area }}">
                    {% for k,assessment in assessments %}
                    <option value="{{ assessment.id }}">{{ assessment.name }}</option>
                    {% endfor %}
                </optgroup>
                {% endfor %}
            </select>
        </div>
        <div class="row top-margin description">
            {% if lastAssessment.id %}
            <p>Last Choice on {{ lastAssessment.created_or_updated_at|date("m/d/y h:m") }}: <strong>{{ lastAssessment.assessment.area.name }} > {{ lastAssessment.assessment.name }} </strong></p>
            {% endif %}
        </div>
        <div class="row top-margin">
            <button class="btn btn-lg btn-primary btn-block btn-signin" type="button" onclick="return submitAssessment()">Save</button>
        </div>
        <div class="row top-margin">
            <button class="btn btn-lg btn-primary btn-block btn-logout" type="button" onclick="if (window.confirm('Logout?')) window.location.href='/logout'">Logout</button>
        </div>
        <!-- div class="row top-margin">
            <a href="https://github.com/fknoedt" target="_blank" title="Checkout my Github page"><i class="fab fa-github fa-2x"></i></a>
        </div-->
    </div><!-- /card-container -->
</div><!-- /container -->

{% include "footer.html.twig" %}

<!--
TODO:
<ul>
    <li>this page's layout</li>
    <li>assessments save</li>
    <li>javascript messages</li>
    <li>javascript xhr responses</li>
</ul>
<i>* stop usage + destroy session + redirect</i>
-->